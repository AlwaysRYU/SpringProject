# Spring 개념 정리
   
* * *
   
## 0. 시작하면서
* ### 목적
  Spring에 대한 지식이 부족하여 강의나 책을 볼 때, 기본개념에 대한 설명이 부족할 때가 있다.   
  찾아보고 여기에 정리하자.   
  또한, Spring 공부하면서 정리하자.
* ### 참고도서
  <스프링부트와 AWS로 혼자 구현하는 웹 서비스>(2019), 이동욱, 프리렉   
   > 위 도서는 따로 파일에 정리한다.  
   
   <스프링부트 시작하기>(2019), 김인우, 인사이트
  
  * #### 추천하는 도서 : 토비의 스프링 / 김영한의 JPA

## 1. 빌드도구?
* ### Gradle?
  Gralde은 Groovy를 기반으로한 오픈 소스 빌드 도구 이다.   
  Ant와 Maven의 장점을 모았다. Android OS의 빌드 도구이기도 하다.
* ### Maven?
  Ant를 사용하던 개발자의 불편함을 해소하고, 부가 기능을 추가한다.
## 2. SpringFrameWork의 이해
* ### 스프링 프레임 워크란?
  스프링MVC프레임워크라고도 한다. 웹 애플리케이션개발을 위해 가장 많이 사용된다.   
  우리나라에서는 전자 정부 표준 프레임워크로 채택되었다.
  스프링의 핵심은, 애플리케이션의 기반을 제공하면서, 개발자는 비즈니스로직의 개발만 집중하도록 할 수 있게 해주는 것이다.
* ### 스프링부트?
  스프링 프레임워크를 기반으로 바로 실행가능한 애플리케이션을 쉽게 만들도록 도와준다.   
  복잡한 관련 설정을 자동으로 처리하고 개발자는 최소한의 설정만 진행하면 된다.   
  
* ### 스프링을 왜쓰냐?   
  스프링의 DI(Dependency Injection)을 사용한다.
  기존의 코드는 손대지 않고, 애플리케이션을 설정하는코드 (어셈블리) 를 손대서 변경이 가능하다.
  + 개방 패쇄 원칙
    확장에는 열려있고, 수정, 변경에는 닫혀 있다.

    

  
## 3. MVC패턴
* ### MVC?
  모델-뷰-컨트롤러의 약자로 소프트웨어 디자인 패턴의 하나이다.   
  모델1, 모델2가 있지만, 일반적으로는 모델2를 얘기한다.   
  MVC패턴을 사용하면, 사용자 인터페이스와 비즈니스로직을 쉽게 분리하여 개발할 수 있다.   
  서로 영향을 최소화하여 개발 및 변경이 쉬운 애플리케이션을 만들 수 있다.   
  즉, 화면과, 데이터처리를 분리해서 재사용이 가능하게 하는 것이다.
  
## 4. H2 데이터베이스
* ### 교육용으로 좋다.   
* ### 가볍고 쉬운 데이터베이스이다.   
* ### jdbc:h2:tcp://localhost/~/test   JDBC URL은 이걸로 설정하자.
* ### 연결은 항상 켜놓아야한다.    
* ### 보통 프로젝트에서는 SQL 폴더를 만들고 따로 관리를 한다. 


## 5. JDBC
* ### 온라인 강의에서는 자세하게 다루지 않음.
* ### application.properties 에 다음과 같은 코드를 추가하자.
```{.java}
  spring.datasource.url=jdbc:h2:tcp://localhost/~/test
  spring.datasource.driver-class-name=org.h2.Driver
  spring.datasource.username=sa
```

* ### JDBC Template
  JDBC API에서 바복코드를 제거해준다.   
  SQL은 작성해야한다.   
  실무에서도 많이 쓰인다.

## 6. JPA(Java Persistence Api)
* #### 스프링 데이터 JPA
  쿼리없이 데이터를 처리가능하다.   
  SQL과 데이터 중심의 설계에서 객체 중심의 설계로 패러다임을 전환할 수 있다.   
  그러므로, 생산성을 크게 높일 수 있다.   
  myBatis(마이바티스)의 점유율을 따라 잡는 중이다.    
  Spring과 비슷한 넓이와 깊이가 있는 기술이다. 공부를 제대로 해봐자   
  인터페이스만 제공을 한다. 표준 인터페이스 같은 느낌   
  객체와 ORM 기술이다. (객체 - 릴레이셔널 테이블 - 매핑)  
  
* #### JPA 설정
  > application.property 에 다음과 같은 설정 추가
  > ```{.java}
  > spring.jpa.show-sql=true
  > spring.jpa.hibernate.ddl-auto=none
  > ```
     
   
  > build.gradle에 라이브러리 추가 (dependency에 입력)
  > implementation 'org.springframework.boot:spring-boot-starter-data-jpa'

* #### 아이덴티티


## 7. 스프링 데이터 JPA
  개발자는 핵심 비즈니스 로직을 개발하는데 집중할 수 있다.    
  실무에서 관계형 데이터베이스를 사용하게 된다면 스프링 데이터 JPA는 선택이 아니라 필수 일 것이다.
  단, JPA를 꼭 먼저 학습하고 스프링데이터JPA를 학습해야 한다.   
  JPA를 편리하게 사용하게 하는 라이브러리일 뿐이다.   
  동적쿼리는 Querydsl이라는 라이브러리를 사용하면 된다.     
  물론, 네이티브 쿼리를 사용할수도 있다. JDBCtemplate를 사용하면 된다. (생 SQL 쿼리)

## 8. AOP
  Spring의 포인터 같은 느낌이다.   
  AOP는 가짜 서비스를 만든다. 이를 프록시라고 한다.
  다르게 구동하는 방법도 있다.

  * AOP 를 사용하고자 하는 상황   
    모든 메소드의 호출 시간을 측정하고 싶을 때.      
    공통관심사항 / 핵심관심사항을 분리한다.   
  위와 같은 상황에서, 시간측정로직을 개발하고, 원하는 곳에 사용한다.
    


***
## 배워야 할 것
  * 위는 스프링으로 웹애플리케이션을 개발하는 방법에 대해 공부한 것.
  * 각각의 기술들을 깊이있게 공부해야한다.
  * 스프링의 모든 것을 세세하게 알필요는 없다. 실무에서 발생하는 문제들을 잘 해결하는것이 중요.
  * 핵심 원리만 알고, 문제가 발생했을 때 대략어디서 찾아들어가면 될지 그런 능력이 더 중요한 것이다.
  


***
## 단축키정리
* ### Getter Setter 자동 입력
  + Alt + Enter
  
***

## 토막 원리
* ### 스프링이 찾는 우선순위
  + 요청이 오면 컨트롤러 -> 관련 컨트롤러
  + 없으면 스태틱 파일을 찾음
  
  
***

## 겪은 오류들 
* ### The bean 'memberService', defined in class path resource
  + 문제 : Spring 실행이 안됨   
  + 원인 : 버전 차이 스프링 부트 2.1 버전부터는 Bean Override 기능이 불가능하다고한다.
  + application.property 에 spring.main.allow-bean-definition-overriding=true를 입력함
